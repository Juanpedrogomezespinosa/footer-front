<!-- Bot√≥n para abrir filtros (visible en todas las resoluciones) -->
<!-- üëá CAMBIO: Quitado 'md:hidden' y a√±adido #filterButton -->
<button
  #filterButton
  [class.hidden]="isMobileMenuOpen()"
  class="flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg fixed bottom-6 right-6 shadow-lg z-40 transition-all hover:bg-primary-dark"
  (click)="toggleFilters()"
  aria-label="Abrir filtros"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="currentColor"
    class="w-5 h-5"
    aria-hidden="true"
  >
    <path
      d="M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 .7 1.7L16 12.4V19a1 1 0 0 1-1.5.86L10 17.07V12.4L3.3 6.7A1 1 0 0 1 3 5z"
    />
  </svg>
  <span class="font-medium">Filtrar</span>
</button>

<!-- Contenido principal -->
<div class="max-w-7xl mx-auto px-4 py-10">
  <section>
    <!-- Grid de Productos -->
    <div
      *ngIf="products() && products().length > 0; else noProducts"
      class="grid [grid-template-columns:repeat(auto-fit,minmax(260px,1fr))] gap-4"
    >
      <app-product-card
        *ngFor="let product of products()"
        [product]="product"
      ></app-product-card>
    </div>

    <!-- Estado de no productos -->
    <ng-template #noProducts>
      <div class="flex flex-col items-center justify-center py-20 text-center">
        <svg
          class="w-16 h-16 text-gray-400"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
          />
        </svg>
        <h3
          class="mt-2 text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"
        >
          No se encontraron productos
        </h3>
        <p
          class="mt-1 text-sm text-text-secondary-light dark:text-text-secondary-dark"
        >
          Prueba a cambiar los filtros o el t√©rmino de b√∫squeda.
        </p>
      </div>
    </ng-template>

    <!-- Paginaci√≥n -->
    <div
      *ngIf="totalPages() > 1"
      class="flex justify-center items-center gap-4 mt-8"
    >
      <button
        [disabled]="currentPage() <= 1"
        class="px-4 py-2 text-sm font-medium rounded-lg border border-subtle-light dark:border-subtle-dark hover:bg-background-light dark:hover:bg-card-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        (click)="goToPreviousPage()"
        type="button"
      >
        Anterior
      </button>

      <span
        class="text-sm text-text-secondary-light dark:text-text-secondary-dark"
      >
        P√°gina {{ currentPage() }} de {{ totalPages() }}
      </span>

      <button
        [disabled]="currentPage() >= totalPages()"
        class="px-4 py-2 text-sm font-medium rounded-lg border border-subtle-light dark:border-subtle-dark hover:bg-background-light dark:hover:bg-card-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        (click)="goToNextPage()"
        type="button"
      >
        Siguiente
      </button>
    </div>
  </section>
</div>

<!-- Sidebar de filtros (m√≥vil y escritorio) -->
<div
  *ngIf="showFilters"
  class="fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-end z-50 transition-opacity duration-300"
  (click)="toggleFilters()"
  role="dialog"
  aria-modal="true"
>
  <div
    class="bg-white w-80 sm:w-96 h-full flex flex-col transform transition-transform duration-300 ease-in-out translate-x-0"
    (click)="$event.stopPropagation()"
    role="document"
  >
    <div
      class="flex items-center justify-between p-4 border-b border-subtle-light"
    >
      <h2 class="text-lg font-semibold text-primary">Filtros</h2>
      <button
        class="text-gray-500 hover:text-secondary"
        (click)="toggleFilters()"
        aria-label="Cerrar filtros"
      >
        ‚úï
      </button>
    </div>

    <!-- Contenido del Filtro -->
    <div class="flex-1 overflow-y-auto p-4">
      <app-products-filters
        (filtersChanged)="onFiltersChanged($event)"
        (sortChanged)="onSortChanged($event)"
      ></app-products-filters>
    </div>

    <!-- Bot√≥n de Aplicar -->
    <div class="border-t border-subtle-light p-4">
      <button
        class="w-full bg-secondary text-white py-2.5 rounded-lg font-semibold hover:bg-secondary/90 transition-colors"
        (click)="toggleFilters()"
        type="button"
      >
        Aplicar filtros
      </button>
    </div>
  </div>
</div>
