<div
  class="group relative flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white transition-shadow hover:shadow-lg h-full cursor-pointer"
  (click)="goToProductDetail()"
>
  <div class="aspect-h-4 aspect-w-3 bg-gray-200 overflow-hidden relative">
    <img
      [src]="getProductImage()"
      [alt]="product.name"
      class="h-full w-full object-cover object-center transition-transform duration-500 group-hover:scale-105"
      (error)="onImageError($event)"
      [loading]="index > -1 && index < 2 ? 'eager' : 'lazy'"
      [attr.fetchpriority]="index > -1 && index < 2 ? 'high' : 'auto'"
    />
  </div>

  <div class="p-4 flex flex-col flex-1">
    <h3 class="text-base font-semibold text-primary truncate">
      <a
        [routerLink]="['/products', 'product', product.id]"
        class="hover:underline"
      >
        {{ product.name }}
      </a>
    </h3>

    <p class="text-sm text-gray-500 capitalize mt-1">
      {{ product.category }}
    </p>

    <div class="mt-auto pt-3 flex items-center gap-2">
      <p class="text-lg font-bold text-primary">
        {{ product.price | currency : "EUR" }}
      </p>

      <p *ngIf="product.oldPrice" class="text-sm text-gray-400 line-through">
        {{ product.oldPrice | currency : "EUR" }}
      </p>
    </div>
  </div>
</div>
