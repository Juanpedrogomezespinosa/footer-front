<!-- Overlay -->
<div
  (click)="close()"
  class="fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-fade-in"
></div>

<!-- Contenedor del Modal -->
<div class="fixed inset-0 z-50 flex items-center justify-center p-4">
  <div
    class="relative w-full max-w-md bg-white dark:bg-card-dark rounded-xl shadow-lg flex flex-col animate-scale-in"
    (click)="$event.stopPropagation()"
  >
    <!-- Cabecera -->
    <div
      class="flex items-center justify-between p-4 border-b border-border-light dark:border-border-dark"
    >
      <h2
        class="text-xl font-bold text-text-light-primary dark:text-text-dark-primary"
      >
        Actualizar Estado del Pedido
      </h2>
      <button
        (click)="close()"
        class="text-text-light-secondary hover:text-primary dark:hover:text-primary transition-colors rounded-full p-1"
      >
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>

    <!-- Contenido -->
    <div *ngIf="orderInfo" class="p-6">
      <p
        class="text-sm text-text-light-secondary dark:text-text-dark-secondary mb-4"
      >
        Selecciona el nuevo estado para el pedido
        <strong class="text-text-light-primary dark:text-text-dark-primary"
          >#{{ orderInfo.id }}</strong
        >.
      </p>

      <form [formGroup]="statusForm">
        <div>
          <label
            for="status-select"
            class="block text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary mb-1"
          >
            Estado del Pedido
          </label>
          <select
            id="status-select"
            formControlName="status"
            class="w-full p-2 border border-border-light rounded-lg bg-background-light focus:outline-none focus:ring-2 focus:ring-primary"
          >
            <option *ngFor="let status of orderStatuses" [value]="status.value">
              {{ status.label }}
            </option>
          </select>
        </div>
      </form>
    </div>

    <!-- Footer con Botones -->
    <div
      class="flex items-center justify-end p-4 border-t border-border-light dark:border-border-dark space-x-2 bg-gray-50 dark:bg-card-dark rounded-b-xl"
    >
      <button
        (click)="close()"
        type="button"
        class="px-4 py-2 rounded-lg text-sm font-medium text-text-light-secondary bg-gray-200 hover:bg-gray-300"
      >
        Cancelar
      </button>
      <button
        (click)="saveStatus()"
        [disabled]="isSaving || statusForm.invalid"
        class="px-4 py-2 rounded-lg text-sm font-medium text-white bg-secondary hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {{ isSaving ? "Guardando..." : "Guardar Cambios" }}
      </button>
    </div>
  </div>
</div>
