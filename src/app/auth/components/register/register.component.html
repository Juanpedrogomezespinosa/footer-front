<div class="w-full">
  <h2 class="text-2xl font-semibold text-primary text-center mb-6">
    Crea tu cuenta
  </h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">
    <!-- Nombre -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
      <input
        type="text"
        formControlName="name"
        placeholder="Tu nombre"
        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary focus:border-secondary outline-none transition"
        [class.border-red-500]="
          form.get('name')?.invalid && form.get('name')?.touched
        "
      />
      <div
        *ngIf="form.get('name')?.touched && form.get('name')?.invalid"
        class="mt-1 text-sm text-red-500"
      >
        <span *ngIf="form.get('name')?.errors?.['required']"
          >El nombre es obligatorio.</span
        >
      </div>
    </div>

    <!-- Email -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <input
        type="email"
        formControlName="email"
        placeholder="Introduce tu email"
        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary focus:border-secondary outline-none transition"
        [class.border-red-500]="
          form.get('email')?.invalid && form.get('email')?.touched
        "
      />
      <div
        *ngIf="form.get('email')?.touched && form.get('email')?.invalid"
        class="mt-1 text-sm text-red-500"
      >
        <span *ngIf="form.get('email')?.errors?.['required']"
          >El email es obligatorio.</span
        >
        <span *ngIf="form.get('email')?.errors?.['email']"
          >Introduce un email válido.</span
        >
      </div>
    </div>

    <!-- Contraseña -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1"
        >Contraseña</label
      >
      <div class="relative">
        <input
          [type]="passwordFieldType"
          formControlName="password"
          placeholder="Contraseña"
          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary focus:border-secondary outline-none transition"
          [class.border-red-500]="
            form.get('password')?.invalid && form.get('password')?.touched
          "
        />
        <button
          type="button"
          (click)="togglePasswordVisibility()"
          class="absolute inset-y-0 right-3 flex items-center"
        >
          <img
            *ngIf="passwordFieldType === 'password'"
            src="assets/icons/ver.svg"
            alt="Mostrar contraseña"
            class="w-5 h-5 opacity-70"
          />
          <img
            *ngIf="passwordFieldType === 'text'"
            src="assets/icons/ocultar.svg"
            alt="Ocultar contraseña"
            class="w-5 h-5 opacity-70"
          />
        </button>
      </div>
      <div
        *ngIf="form.get('password')?.touched && form.get('password')?.invalid"
        class="mt-1 text-sm text-red-500"
      >
        <span *ngIf="form.get('password')?.errors?.['required']"
          >Campo obligatorio.</span
        >
      </div>
    </div>

    <!-- Confirmar contraseña -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1"
        >Repite la contraseña</label
      >
      <input
        [type]="passwordFieldType"
        formControlName="confirmPassword"
        placeholder="Repite la contraseña"
        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary focus:border-secondary outline-none transition"
        [class.border-red-500]="
          (form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid) ||
          (form.errors?.['passwordMismatch'] && form.get('confirmPassword')?.touched)
        "
      />
      <div
        *ngIf="form.get('confirmPassword')?.touched"
        class="mt-1 text-sm text-red-500"
      >
        <span *ngIf="form.get('confirmPassword')?.errors?.['required']"
          >Campo obligatorio.</span
        >
        <span *ngIf="form.errors?.['passwordMismatch']"
          >Las contraseñas no coinciden.</span
        >
      </div>
    </div>

    <button
      type="submit"
      [disabled]="form.invalid"
      class="w-full py-2 bg-primary text-white rounded-lg font-medium hover:bg-secondary transition disabled:opacity-50"
    >
      Crear cuenta
    </button>

    <div class="text-center text-sm text-gray-600">
      ¿Ya tienes cuenta?
      <a routerLink="/login" class="text-secondary hover:underline font-medium"
        >Inicia sesión</a
      >
    </div>
  </form>
</div>
